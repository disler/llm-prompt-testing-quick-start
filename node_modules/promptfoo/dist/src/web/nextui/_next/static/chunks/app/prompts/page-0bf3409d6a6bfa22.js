(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[794],{8050:function(e,t,i){Promise.resolve().then(i.bind(i,176))},2810:function(e,t,i){"use strict";let s;async function n(){if(!s){let e=await fetch("/api/config"),t=await e.json();s=t.apiBaseUrl}return s}i.d(t,{b:function(){return n}})},176:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return P}});var s=i(7437),n=i(2265),l=i(1396),c=i.n(l),r=i(6507),d=i(2492),a=i(3701),o=i(9279),h=i(666),u=i(6988),x=i(4147),j=i(5781),Z=i(8276),p=i(4033),v=i(2810),f=i(9394),m=i(2834),w=i(6337),y=i(1797),C=i(5446),g=i(3226),k=i(5551),E=e=>{var t;let{openDialog:i,handleClose:n,selectedPrompt:l}=e;return(0,s.jsxs)(f.Z,{open:i,onClose:n,fullWidth:!0,maxWidth:"lg",children:[(0,s.jsxs)(y.Z,{children:["Prompt ",l.id.slice(0,6)]}),(0,s.jsxs)(w.Z,{children:[(0,s.jsx)(g.Z,{variant:"h6",style:{marginTop:"1rem"},children:"Prompt"}),(0,s.jsx)(C.u,{readOnly:!0,value:null==l?void 0:null===(t=l.prompt)||void 0===t?void 0:t.raw,style:{width:"100%",padding:"0.75rem"},maxRows:50}),(0,s.jsx)(g.Z,{variant:"h6",style:{marginTop:"1rem"},children:"Used in..."}),(0,s.jsxs)(a.Z,{children:[(0,s.jsx)(u.Z,{children:(0,s.jsxs)(x.Z,{children:[(0,s.jsx)(h.Z,{children:"Eval ID"}),(0,s.jsx)(h.Z,{children:"Dataset ID"}),(0,s.jsx)(h.Z,{children:"Raw score"}),(0,s.jsx)(h.Z,{children:"Pass rate"}),(0,s.jsx)(h.Z,{children:"Pass count"}),(0,s.jsx)(h.Z,{children:"Fail count"})]})}),(0,s.jsx)(o.Z,{children:null==l?void 0:l.evals.sort((e,t)=>t.id.localeCompare(e.id)).map(e=>{var t,i,n,l,r,d;let a=null!==(l=null===(t=e.metrics)||void 0===t?void 0:t.testPassCount)&&void 0!==l?l:0,o=null!==(r=null===(i=e.metrics)||void 0===i?void 0:i.testFailCount)&&void 0!==r?r:0,u=a+o>0?(a/(a+o)*100).toFixed(2)+"%":"-";return(0,s.jsxs)(x.Z,{children:[(0,s.jsx)(h.Z,{children:(0,s.jsx)(c(),{href:"/eval/?file=".concat(e.filePath),children:e.id.slice(0,6)})}),(0,s.jsx)(h.Z,{children:(0,s.jsx)(c(),{href:"/datasets/?id=".concat(e.datasetId),children:e.datasetId.slice(0,6)})}),(0,s.jsx)(h.Z,{children:null!==(d=null===(n=e.metrics)||void 0===n?void 0:n.score.toFixed(2))&&void 0!==d?d:"-"}),(0,s.jsx)(h.Z,{children:u}),(0,s.jsx)(h.Z,{children:a}),(0,s.jsx)(h.Z,{children:o})]},"eval-".concat(e.id))})})]})]}),(0,s.jsx)(m.Z,{children:(0,s.jsx)(k.Z,{onClick:n,children:"Close"})})]})};function P(){let e=(0,p.useSearchParams)(),[t,i]=(0,n.useState)([]),[l,f]=(0,n.useState)("date"),[m,w]=(0,n.useState)("desc"),[y,C]=(0,n.useState)(1),[g,k]=(0,n.useState)(10),[P,S]=(0,n.useState)(!1),[D,I]=(0,n.useState)(0),_=e=>{let t=l===e&&"asc"===m?"desc":"asc";f(e),w(t)};(0,n.useEffect)(()=>{(async()=>{fetch("".concat(await (0,v.b)(),"/api/prompts")).then(e=>e.json()).then(e=>{let t=[...e.data].sort((e,t)=>null===l?0:"asc"===m?e[l]>t[l]?1:-1:e[l]<t[l]?1:-1);i(t)})})()},[l,m]),(0,n.useEffect)(()=>{let i=null==e?void 0:e.get("id");if(i){let e=t.findIndex(e=>e.id.startsWith(i));-1!==e&&b(e)}},[t,e]);let b=e=>{S(!0),I(e)};return(0,s.jsxs)(r.Z,{paddingX:2,children:[(0,s.jsxs)(a.Z,{children:[(0,s.jsx)(u.Z,{children:(0,s.jsxs)(x.Z,{children:[(0,s.jsx)(h.Z,{style:{width:"10%"},children:"ID"}),(0,s.jsx)(h.Z,{style:{width:"60%"},children:(0,s.jsx)(j.Z,{active:"raw"===l,direction:"raw"===l?m:"asc",onClick:()=>_("raw"),children:"Prompt"})}),(0,s.jsx)(h.Z,{style:{width:"20%"},children:(0,s.jsx)(Z.Z,{title:"The date of the most recent eval for this prompt",children:(0,s.jsx)(j.Z,{active:"date"===l,direction:"date"===l?m:"asc",onClick:()=>_("date"),children:"Most recent eval"})})}),(0,s.jsx)(h.Z,{style:{width:"10%"},children:(0,s.jsx)(j.Z,{active:"count"===l,direction:"count"===l?m:"asc",onClick:()=>_("count"),children:"# Evals"})})]})}),(0,s.jsx)(o.Z,{children:t.slice((y-1)*g,y*g).map((e,t)=>(0,s.jsxs)(x.Z,{hover:!0,children:[(0,s.jsx)(h.Z,{style:{width:"10%"},children:e.id.slice(0,6)}),(0,s.jsx)(h.Z,{style:{width:"60%",whiteSpace:"pre-wrap",cursor:"pointer"},onClick:()=>b(t),children:e.prompt.raw.length>500?e.prompt.raw.slice(0,500)+"...":e.prompt.raw}),(0,s.jsx)(h.Z,{style:{width:"20%"},children:e.recentEvalDate?(0,s.jsx)(c(),{href:"/eval?file=".concat(e.recentEvalId),children:e.recentEvalDate}):"Unknown"}),(0,s.jsx)(h.Z,{style:{width:"10%"},children:e.count})]},t))})]}),Math.ceil(t.length/g)>1&&(0,s.jsx)(d.Z,{count:Math.ceil(t.length/g),page:y,onChange:(e,t)=>C(t)}),t[D]&&(0,s.jsx)(E,{openDialog:P,handleClose:()=>{S(!1)},selectedPrompt:t[D]})]})}}},function(e){e.O(0,[293,808,420,21,971,596,744],function(){return e(e.s=8050)}),_N_E=e.O()}]);